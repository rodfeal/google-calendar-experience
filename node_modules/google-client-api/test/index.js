var test = require( 'prova' );

var googleClientApi = require( './..' );

test( 'Getting gapi object', function( t ) {

	var timeoutid;

	t.plan( 4 );

	googleClientApi( function( gapi ) {

		console.log( gapi );
		t.ok( gapi, 'received a gapi object from callback' );
		t.equal( typeof gapi, 'object', 'gapi is an object' );
	}).then( function( gapi ) {

		t.ok( gapi, 'received a gapi object from promise' );
	});

	googleClientApi().then( function( gapi ) {

		t.ok( gapi, 'received a gapi object from second promise' );

		clearTimeout( timeoutid );
	});

	timeoutid = setTimeout( function() {

		t.fail( 'Three tests didn\'t finnish in 1.5 seconds' );
		t.end();
	}, 1500 );
});